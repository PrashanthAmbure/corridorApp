<form name="updateForm" class="update-form" ng-submit="saveApp( $event )" novalidate ng-class="{'form-validate':updateForm.$showValidation}">
    <div ng-if="item">
        <div class="pull-right">
        <md-button class="md-raised md-primary">
            <span ng-if="isPublished">
                Update Changes
            </span>
            <span ng-if="!isPublished">
                Save to draft
            </span>
        </md-button>
        <md-button ng-if="!isPublished" class="md-raised md-primary" ng-click="togglePublish( $event, isPublished ) ">
            Publish
        </md-button>
        <md-button ng-if="isPublished" class="md-raised md-warn" ng-click="togglePublish( $event, isPublished ) ">
            unpublish
        </md-button>
        <md-button ng-if="item._id"  class="md-raised md-primary" target="_blank" ng-href="/gallery/id/{{item._id}}">
            Preview
        </md-button>
        </div>
        
        <h1 class="md-display-1">
      <span ng-show="itemName">
        Edit: {{itemName}}
      </span>
      <span ng-show="!itemName">
        Welcome, We are happy for Your Idea.
      </span>
    </h1>
        <md-content layout-padding>
            <md-tabs md-dynamic-height md-border-bottom md-selected="global.selectedIndex">
                <md-tab label="Introduction">
                    <md-content class="tab-content">
                        <div>
                            <div>
                                <md-input-container>
                                    <label>App Name</label>
                                    <input md-maxlength="30" required name="appName" ng-model="item.appName">
                                    <div ng-messages="updateForm.$showValidation && updateForm.appName.$error">
                                        <div ng-message="required">This is required.</div>
                                        <div ng-message="md-maxlength">The name has to be less than 30 characters long.</div>
                                    </div>
                                </md-input-container>
                            </div>
                            <div>
                                <md-input-container>
                                    <label>Short Description</label>
                                    <textarea columns="1" name="shortDesc" ng-model="item.shortDesc"></textarea>
                                    <div ng-messages="updateForm.$showValidation && updateForm.shortDesc.$error">
                                        <div ng-message="required">This is required.</div>
                                    </div>
                                </md-input-container>
                            </div>
                            <div>
                                <md-input-container>
                                    <label>Long Description</label>
                                    <textarea columns="1" name="longDesc" ng-model="item.longDesc"></textarea>
                                </md-input-container>
                            </div>
                            <div>
                                <md-input-container>
                                    <label>Select a Category </label>
                                    <md-select ng-model="item.category" name="category">
                                        <md-option value="WebSite, IT and Software">
                                            WebSite, IT and Software
                                        </md-option>
                                        <md-option value="Mobile">
                                            Mobile
                                        </md-option>
                                        <md-option value="Sales">
                                            Sales
                                        </md-option>
                                        <md-option value="Product Development">
                                            Product Development
                                        </md-option>
                                        <md-option value="Entertainment">
                                            Entertainment
                                        </md-option>
                                    </md-select>
                            </div>

                        </div>
                    </md-content>
                </md-tab>
                <md-tab label="Solution">
                    <md-content class="tab-content">
                        <div>
                            <md-input-container>
                                <label>Analysis/Solution Approach</label>
                                <textarea required columns="1" name="solution" ng-model="item.solution"></textarea>
                                <div ng-messages="updateForm.$showValidation && updateForm.solution.$error">
                                    <div ng-message="required">This is required.</div>
                                </div>
                            </md-input-container>

                        </div>
                        <div>
                            <md-input-container>
                                <label>Youtube link</label>
                                <input  name="vedioLink" ng-model="item.vedioLink" ng-pattern="/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/i"/>
                                <div ng-messages="updateForm.$showValidation && updateForm.vedioLink.$error">
                                    <div ng-message="pattern">Invalid url</div>
                                </div>
                            </md-input-container>
                        </div>
                        <div>
                            <md-input-container>
                                <label>Useful Links</label>
                                <textarea columns="1" name="links" ng-model="item.links"></textarea>
                            </md-input-container>
                        </div>
                    </md-content>
                </md-tab>
                <md-tab label="Team">
                    <md-content class="tab-content">
                        <div class="field-wrapper">
                            <md-chips required ng-model="item.proposedTeam" name="proposedTeam"  md-autocomplete-snap md-require-match="true">
                                <md-autocomplete
                                    md-search-text="search.proposed"
                                    md-items="sugg in querySearch(search.proposed, 'proposedTeam')"
                                    placeholder="+ Proposed By "

                                    >
                                    <span>{{sugg.fullName}} :: {{sugg.mail}}</span>
                                </md-autocomplete>
                                <md-chip-template>
                                    <span>
                                      <strong>{{$chip.fullName}}</strong>
                                      <em>({{$chip.mail}})</em>
                                    </span>
                                </md-chip-template>
                            </md-chips>
                            <div ng-messages="updateForm.$showValidation && updateForm.
                            proposedTeam.$error">
                                <div ng-message="required">This is required.</div>
                            </div>
                        </div>
                        <div>
                            <md-chips ng-model="item.contributors" name="contributors"  md-autocomplete-snap md-require-match="true">
                                <md-autocomplete
                                    md-search-text="search.contributor"
                                    md-items="sugg in querySearch(search.contributor, 'contributors')"
                                     placeholder="+ Add Contributors"
                                    >
                                    <span>{{sugg.fullName}} :: {{sugg.mail}}</span>
                                </md-autocomplete>
                                <md-chip-template>
                                    <span>
                                      <strong>{{$chip.fullName}}</strong>
                                      <em>({{$chip.mail}})</em>
                                    </span>
                                </md-chip-template>
                            </md-chips>
                        </div>
                    </md-content>
                </md-tab>
                <md-tab label="Settings">
                    <md-content class="tab-content">
                        <div>
                            <div>
                                <p>Is the App needs to be publish outside pramati</p>
                                <md-radio-group ng-model="item.public" name="public">
                                    <md-radio-button value="public" class="md-primary"> Public </md-radio-button>
                                    <md-radio-button value="private"> Private </md-radio-button>
                                </md-radio-group>
                            </div>
                        </div>
                        <div>
                            <md-input-container>
                                <label>Project Status</label>
                                <input type="text" ng-model="item.status" name="status">
                            </md-input-container>
                        </div>
                        <div class="field-wrapper">
                            <md-chips ng-model="item.invites" name="invites" md-autocomplete-snap md-require-match="true">
                                <md-autocomplete
                                    md-search-text="search.invite"
                                    md-items="sugg in querySearch(search.invite, 'invites')"
                                    placeholder="+Invite"
                                    >
                                    <span>{{sugg.fullName}} :: {{sugg.mail}}</span>
                                </md-autocomplete>
                                <md-chip-template>
                                    <span>
                                      <strong>{{$chip.fullName}}</strong>
                                      <em>({{$chip.mail}})</em>
                                    </span>
                                </md-chip-template>
                            </md-chips>
                        </div>
                        <div>
                            <md-input-container>
                                <label>App Icon URL</label>
                                <input type="text" ng-model="item.imgurl" name="imgurl">
                            </md-input-container>
                        </div>
                    </md-content>
                </md-tab>
                <md-tab label="interested People" ng-if="item.interests &&item.interests.length>=0">
                    <md-content class="tab-content">
                        <h2>Interested People</h2>
                        <div ng-if="!item.interests || item.interests.length===0">
                            <p>This an Awesome Idea</p>
                            <p>We are looking for Interested people</p>
                        </div>
                        <div class="interested-peoples">
                           <div ng-repeat="user in item.interests">
                                <p>{{user.fullName}}</p>
                                <p>{{user.mail}}</p>
                                <p>hours: {{user.hours}}</p>
                                <p>About: {{user.aboutme}}</p>
                           </div>
                        </div>
                    </md-content>
                </md-tab>
            </md-tabs>
        </md-content>
        <div style="overflow:auto">
            <md-button href="#" ng-click="prevTab( $event )" class="md-raised md-primary pull-left" ng-if="global.selectedIndex !=0">
                Previous
            </md-button>
            <md-button href="#" ng-click="nextTab( $event )" class="md-raised md-primary pull-right" ng-if="global.selectedIndex !=(tabcount - 1)">
                Next
            </md-button>
        </div>

    </div>
</form>

<style type="text/css">
    .tab-content {
        padding: 20px;
    }
    
    .update-form {
        margin-bottom: 20px;
    }
    
    .field-wrapper {
        padding: 2px 2px 26px;
    }
    .md-chips .md-chip-input-container {
        padding: 0;
    }
    md-autocomplete input:not(.md-input) {
        font-size: 100%;
    }
    .md-virtual-repeat-container.md-autocomplete-suggestions-container {
        min-width: 300px !important;
    }
    .interested-peoples > div{
        width: 33%;
        display: inline-block;
        vertical-align: top;
    }
    @media (max-width: 600px){
        .interested-peoples > div{
            width: auto;
        }
    }
    .md-chips .md-chip .md-chip-content em {
        font-size: 10px;
    }
    .md-button {
        vertical-align: middle;
    }
</style>